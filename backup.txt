

<style>
	#example_wrapper {width: fit-content;}
</style>

<!-- Page content -->
<div class="container-fluid pt-8">
<!-- bootom top bar -->

<!-- bottom top bar -->
<div class="row">
	<div class="col-md-12">
		<div class="card shadow">
			<div class="card-header">
				<h2 class="mb-0">MTM - Operating Risk</h2>
			</div>
			<div class="card-body">
				<div class="table-responsive">

				<?= $this->include('message/message') ?>  

					<table id="example" class="table table-striped table-bordered w-100 text-nowrap">
						<thead>
							<tr>
								<th class="wd-15p">Exposure <br/>Ref. No</th>
								<th class="wd-20p">Currency</th>
								<th class="wd-20p">Exposure<br/>Identification <br/>Date (EID)</th>
								<th class="wd-10p">Spot Rate <br/>as on EID</th>
								<th class="wd-25p">Date of <br/>Invoice</th>
								<th class="wd-15p">Counter <br/>Party</th>
								<th class="wd-20p">Counter Party<br/> Country</th>
								<th class="wd-20p">Exposure <br/>Type</th>
								<th class="wd-10p">Amount<br/> in FC</th>
								<th class="wd-25p">Due Date</th>
								<th class="wd-15p">Forward <br/>Rate (Day 1)</th>
								<th class="wd-20p">Target <br/>Rate</th>
								<th class="wd-20p">Target <br/>Value (INR)</th>
								<th class="wd-20p">Risk <br/>Limit</th>
								<th class="wd-10p">Open <br/>Amount (FC)</th>
								<th class="wd-25p">Current <br/> Forward Rate</th>
								<th class="wd-15p">Open <br/>Amount (INR)</th>
								<th class="wd-20p">Gain / Loss</th>
								<th class="wd-20p">Risk Limit</th>
								<th class="wd-10p">Excess over  <br/>the Limit(SL, TP)</th>
								<th class="wd-25p">Hedge<br/> Amount (FC)</th>
								<th class="wd-25p">Hedge<br/> Rate</th>
								<th class="wd-25p">Hedge<br/> Amount (INR)</th>
								<th class="wd-25p">Portfolio <br/>Value (INR)</th>
								<th class="wd-25p">Portfolio <br/>Rate</th>
								<th class="wd-25p">Gain<br/>Loss</th>
								<th class="wd-25p">Risk<br/>Limit</th>
								<th class="wd-25p">Excess over<br/>the Limit (SL, TP)</th>
								<th class="wd-25p">Settlement <br/>Amount (INR)</th>
								<th class="wd-25p">Settlement<br/>(Rate)</th>
								<th class="wd-25p">Gain<br/>/Loss</th>
							</tr>
						</thead>
						<tbody>
							<?php foreach ($transaction as $row) : 
								$dueDate = $row->dueDate;
								$resoval = $controller->forrwardCalculator($row->exposureType, $row->currency, $dueDate);
								$crntfrrate = json_decode($resoval);
								$exp_ref = $row->exposurereInfo;
								$curr = $row->Currency;
								$exp_idt = $row->exposureidentificationdate;
								$spot_rate = $row->spot_rate;
								$dateofInvoice = $row->dateofInvoice;
								$counterPartyName = $row->counterPartyName;
								$counterPartycountry = $row->counterPartycountry;
								$exposure_type = $row->exposure_type;
								$amountinFC = $row->amountinFC;
								$forward_rate = $row->forward_rate;
								$targetRate = $row->targetRate;
								$targetValueInr = $targetRate*$amountinFC;
								$Avgrate = $row->Avgrate;
								$ToatalforwardAmount = $row->ToatalforwardAmount;
								$Toatalallpayment = $row->Toatalallpayment;
								$AvgspotamountRate = $row->AvgspotamountRate;
								$openAmountFC = $amountinFC-$ToatalforwardAmount;
								$currentForwardRate = isset($crntfrrate->result->forward_rate) ?  $crntfrrate->result->forward_rate : 1;
								$openAmountINR =  ($openAmountFC*$currentForwardRate);
								$portfoliovalue = $openAmountINR + ($ToatalforwardAmount*$Avgrate);
								$portfoliorate = $portfoliovalue / $amountinFC;
								$ganorloseopendetails = $openAmountINR -($openAmountFC*$targetRate);
								$ganorlose = $portfoliovalue - $targetValueInr;
								$settlementAmount = $Toatalallpayment + $AvgspotamountRate;
								$timestamp = strtotime($exp_idt);
								$newFormat = date("d-m-Y h:i A", $timestamp);
								$timedateofInvoice = strtotime($dateofInvoice);
								$newDateFormat = date("d-m-Y", $timedateofInvoice);
								$timedateofdueDate = strtotime($dueDate);
								$newDateFormatdueDate = date("d-m-Y", $timedateofdueDate);
								?>

								<tr>
									<th><?php echo $exp_ref  ?></th>
									<td><?php echo $curr ?></td>
								  <td><?php 
								  echo $newFormat ?></td>	
								<td><?php echo $spot_rate ?></td>														  
								<td><?php echo $newDateFormat ?></td>
								<td><?php echo $counterPartyName ?></td>
								<td><?php echo $counterPartycountry ?></td>
								<td><?php echo $exposure_type ?></td>
								<td><?php echo number_format($amountinFC, 2) ?></td>
								<td><?php echo $newDateFormatdueDate ?></td>
								<td><?php echo $forward_rate ?></td>
								<td><?php echo $targetRate ?></td>
								<td><?php echo number_format($targetValueInr, 2) ?></td>
								<td>-</td>
								<td><?php echo number_format($openAmountFC, 2) ?></td>
								<td><?php echo $currentForwardRate ?></td>
								<td><?php echo number_format($openAmountINR, 2)  ?> </td>
								<td><?php echo number_format($ganorloseopendetails, 2)     ?></td>
								<td>-</td>
								<td>-</td>
								<td><?php echo number_format($ToatalforwardAmount, 2) ?></td>
								<td><?php echo  number_format($Avgrate, 4) ?></td>
								<td><?php echo number_format($ToatalforwardAmount*$Avgrate , 2) ?></td>
								<td><?php echo number_format($portfoliovalue, 2) ?></td>
								<td><?php echo number_format($portfoliorate, 4)  ?></td>
								<td><?php echo  number_format($ganorlose, 2) ?></td>
								<td>-</td>
								<td>-</td>
								<td><?php echo number_format($settlementAmount, 2)  ?></td>
								<td><?php echo  number_format($settlementAmount / $amountinFC, 4)   ?></td>
								<td><?php echo $settlementAmount-$targetValueInr  ?></td>
								</tr>
							<?php endforeach; ?>
							<?php if (count($transaction) <= 0) : ?>
								<tr>
									<td class="p-1 text-center" colspan="120">No result found</td>
								</tr>
							<?php endif ?>
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>
</div>

</div>

















////////////////////////////// table below
<!DOCTYPE html>
<html>
<head>
  <style>
   body {
  font-family: Arial, sans-serif;
}
table {
  cell-spacing: 0;
  border-collapse: collapse;
}
thead > tr {
  background-color: #025B86;
  color: white;
}
thead > tr > * {
  font-size: 1.1em;
  padding: 0.45em;
}
tr > * {
  padding: 0.125em 0.45em;
}
tbody tr:nth-child(even) > * {
  background-color: #D2E8FD;
}
tbody tr.subhead > * {
  background-color: #0370a3;
  color: white;
  padding: 0.75em;
  font-size: 1.1em;
}

.border {
  border: solid 4px #025B86;
  border-radius: 1em;
  display: table;
}

  </style>
</head>
<body>
<body>
  <div class="border">
  <table>
    <thead>
      <tr>
	  <th colspan=4>North Campus</th>

      </tr>
    </thead>
    <tbody>
      <tr class="subhead">        <th>First Name</th>
        <th>Last Name</th>
        <th>Ext</th>
        <th>Office</th></tr>
      <tr><td>Jackson</td><td>Butler</td><td>6268</td><td>1-868</td></tr>
      <tr><td>Mary</td><td>Ellis</td><td>6602</td><td>1-544</td></tr>
      <tr><td>Reece</td><td>Gardner</td><td>2194</td><td>5-362</td></tr>
      <tr><td>Zephania</td><td>Hooper</td><td>1707</td><td>2-413</td></tr>
      <tr><td>Caesar</td><td>Jackson</td><td>5684</td><td>9-983</td></tr>
      <tr><td>Paloma</td><td>Lane</td><td>7436</td><td>8-583</td></tr>
      <tr><td>Henry</td><td>Mcneil</td><td>7698</td><td>2-265</td></tr>
      <tr><td>Eliana</td><td>Rojas</td><td>3011</td><td>7-704</td></tr>
      <tr><td>Timothy</td><td>Schultz</td><td>1504</td><td>5-438</td></tr>
      <tr><td>Susan</td><td>Baker</td><td>1528</td><td>9-213</td></tr>
      <tr class="subhead"><th colspan=4>South Campus</th></tr>
      <tr><td>Yvonne</td><td>Harmon</td><td>7137</td><td>1-127</td></tr>
      <tr><td>Holmes</td><td>Holder</td><td>6036</td><td>3-335</td></tr>
      <tr><td>Fritz</td><td>Lang</td><td>4002</td><td>5-973</td></tr>
      <tr><td>Haley</td><td>Meyer</td><td>6147</td><td>2-217</td></tr>
      <tr class="subhead"><th colspan=4>West Campus</th></tr>
      <tr><td>Maya</td><td>Curtis</td><td>8344</td><td>5-611</td></tr>
      <tr><td>Peter</td><td>French</td><td>4534</td><td>3-120</td></tr>
      <tr><td>Vivian</td><td>Houston</td><td>2575</td><td>5-574</td></tr>
      <tr><td>Tobias</td><td>Huff</td><td>2672</td><td>9-549</td></tr>
      <tr><td>Victor</td><td>Landry</td><td>7499</td><td>5-526</td></tr>
      <tr><td>Lucius</td><td>Mcintosh</td><td>3388</td><td>6-464</td></tr>
    </tbody>
  </table>
  </div>
</body>
</body>
</html>



//////////// below is mtm

<style>
	#example_wrapper {width: fit-content;}
</style>

<!-- Page content -->
<div class="container-fluid pt-8">
<!-- bootom top bar -->

<!-- bottom top bar -->
<div class="row">
	<div class="col-md-12">
		<div class="card shadow">
			<div class="card-header">
				<h2 class="mb-0">MTM - Operating Risk</h2>
			</div>
			<div class="card-body">
				<div class="table-responsive">

				<?= $this->include('message/message') ?>  

					<table id="example" class="table table-striped table-bordered w-100 text-nowrap">
						<thead>
							<tr>
								<th class="wd-15p">Exposure <br/>Ref. No</th>
								<th class="wd-20p">Currency</th>
								<th class="wd-20p">Exposure<br/>Identification <br/>Date (EID)</th>
								<th class="wd-10p">Spot Rate <br/>as on EID</th>
								<th class="wd-25p">Date of <br/>Invoice</th>
								<th class="wd-15p">Counter <br/>Party</th>
								<th class="wd-20p">Counter Party<br/> Country</th>
								<th class="wd-20p">Exposure <br/>Type</th>
								<th class="wd-10p">Amount<br/> in FC</th>
								<th class="wd-25p">Due Date</th>
								<th class="wd-15p">Forward <br/>Rate (Day 1)</th>
								<th class="wd-20p">Target <br/>Rate</th>
								<th class="wd-20p">Target <br/>Value (INR)</th>
								<th class="wd-20p">Risk <br/>Limit</th>
								<th class="wd-10p">Open <br/>Amount (FC)</th>
								<th class="wd-25p">Current <br/> Forward Rate</th>
								<th class="wd-15p">Open <br/>Amount (INR)</th>
								<th class="wd-20p">Gain / Loss</th>
								<th class="wd-20p">Risk Limit</th>
								<th class="wd-10p">Excess over  <br/>the Limit(SL, TP)</th>
								<th class="wd-25p">Hedge<br/> Amount (FC)</th>
								<th class="wd-25p">Hedge<br/> Rate</th>
								<th class="wd-25p">Hedge<br/> Amount (INR)</th>
								<th class="wd-25p">Portfolio <br/>Value (INR)</th>
								<th class="wd-25p">Portfolio <br/>Rate</th>
								<th class="wd-25p">Gain<br/>Loss</th>
								<th class="wd-25p">Risk<br/>Limit</th>
								<th class="wd-25p">Excess over<br/>the Limit (SL, TP)</th>
								<th class="wd-25p">Settlement <br/>Amount (INR)</th>
								<th class="wd-25p">Settlement<br/>(Rate)</th>
								<th class="wd-25p">Gain<br/>/Loss</th>
							</tr>
						</thead>
						<tbody>
							<?php foreach ($transaction as $row) : 
								$dueDate = $row->dueDate;
								$resoval = $controller->forrwardCalculator($row->exposureType, $row->currency, $dueDate);
								$crntfrrate = json_decode($resoval);
								$exp_ref = $row->exposurereInfo;
								$curr = $row->Currency;
								$exp_idt = $row->exposureidentificationdate;
								$spot_rate = $row->spot_rate;
								$dateofInvoice = $row->dateofInvoice;
								$counterPartyName = $row->counterPartyName;
								$counterPartycountry = $row->counterPartycountry;
								$exposure_type = $row->exposure_type;
								$amountinFC = $row->amountinFC;
								$forward_rate = $row->forward_rate;
								$targetRate = $row->targetRate;
								$targetValueInr = $targetRate*$amountinFC;
								$Avgrate = $row->Avgrate;
								$ToatalforwardAmount = $row->ToatalforwardAmount;
								$Toatalallpayment = $row->Toatalallpayment;
								$AvgspotamountRate = $row->AvgspotamountRate;
								$openAmountFC = $amountinFC-$ToatalforwardAmount;
								$currentForwardRate = isset($crntfrrate->result->forward_rate) ?  $crntfrrate->result->forward_rate : 1;
								$openAmountINR =  ($openAmountFC*$currentForwardRate);
								$portfoliovalue = $openAmountINR + ($ToatalforwardAmount*$Avgrate);
								$portfoliorate = $portfoliovalue / $amountinFC;
								$ganorloseopendetails = $openAmountINR -($openAmountFC*$targetRate);
								$ganorlose = $portfoliovalue - $targetValueInr;
								$settlementAmount = $Toatalallpayment + $AvgspotamountRate;
								$timestamp = strtotime($exp_idt);
								$newFormat = date("d-m-Y h:i A", $timestamp);
								$timedateofInvoice = strtotime($dateofInvoice);
								$newDateFormat = date("d-m-Y", $timedateofInvoice);
								$timedateofdueDate = strtotime($dueDate);
								$newDateFormatdueDate = date("d-m-Y", $timedateofdueDate);
								?>

								<tr>
									<th><?php echo $exp_ref  ?></th>
									<td><?php echo $curr ?></td>
								  <td><?php 
								  echo $newFormat ?></td>	
								<td><?php echo $spot_rate ?></td>														  
								<td><?php echo $newDateFormat ?></td>
								<td><?php echo $counterPartyName ?></td>
								<td><?php echo $counterPartycountry ?></td>
								<td><?php echo $exposure_type ?></td>
								<td><?php echo number_format($amountinFC, 2) ?></td>
								<td><?php echo $newDateFormatdueDate ?></td>
								<td><?php echo $forward_rate ?></td>
								<td><?php echo $targetRate ?></td>
								<td><?php echo number_format($targetValueInr, 2) ?></td>
								<td>-</td>
								<td><?php echo number_format($openAmountFC, 2) ?></td>
								<td><?php echo $currentForwardRate ?></td>
								<td><?php echo number_format($openAmountINR, 2)  ?> </td>
								<td><?php echo number_format($ganorloseopendetails, 2)     ?></td>
								<td>-</td>
								<td>-</td>
								<td><?php echo number_format($ToatalforwardAmount, 2) ?></td>
								<td><?php echo  number_format($Avgrate, 4) ?></td>
								<td><?php echo number_format($ToatalforwardAmount*$Avgrate , 2) ?></td>
								<td><?php echo number_format($portfoliovalue, 2) ?></td>
								<td><?php echo number_format($portfoliorate, 4)  ?></td>
								<td><?php echo  number_format($ganorlose, 2) ?></td>
								<td>-</td>
								<td>-</td>
								<td><?php echo number_format($settlementAmount, 2)  ?></td>
								<td><?php echo  number_format($settlementAmount / $amountinFC, 4)   ?></td>
								<td><?php echo $settlementAmount-$targetValueInr  ?></td>
								</tr>
							<?php endforeach; ?>
							<?php if (count($transaction) <= 0) : ?>
								<tr>
									<td class="p-1 text-center" colspan="120">No result found</td>
								</tr>
							<?php endif ?>
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>
</div>

</div>


















































































<link rel="stylesheet" type="text/css" href="<?php echo base_url('assets/calendar/page.css'); ?>">

<div class="container-fluid pt-8">
<?= $this->include('bottomtopbar/topbar') ?>
<div class="card-body">
<div class="nav-wrapper p-0">
<?= $this->include('message/message') ?>  
</div>
</div>
<div class="card shadow ">
<div class="card-body">

<div class="tab-content" id="myTabContent">

<!-- strat -->
<!-- end -->
<form action="<?php echo  base_url("saveforwardcoverdetails")?>" method="POST" enctype="multipart/form-data">
<h2 class="mb-5"><?php echo $title ?></h2>

<div class="row">
    <div class="col-md-3 col-sm-12">
    
        <input type="hidden" name="count_items" id="count_items" value="<?php echo  $i?>" />
                <div class="form-group"><label class="form-label"><?php echo $pade_title5 ?></label> 
        <input id="fordwardoption<?php echo  $i?>" type="text" name="fordwardoption[]" placeholder="Forward/ Option"  class="form-control"  required/>

            </div>
            <div class="form-group"><label class="form-label"><?php echo $pade_title11 ?></label>
        <input id="contractedrate" type="number" name="contractedrate[]" min='0' value='0' step='.0001' placeholder="Contracted Rate" class="form-control"  required/>
        </div>
    
        <div class="form-group"><label class="form-label"><?php echo $pade_title12 ?></label>
        <input id="expirydate<?=$i?>" name="expirydate[]" class="form-control datepicker" type="text" placeholder="MM/DD/YYYY"  required/>
        </div>
    </div>
    <div class="col-md-3 col-sm-12">
            <div class="form-group"><label class="form-label"><?php echo $pade_title6 ?></label> 
    <input id="dealno<?php echo  $i?>" type="text" name="dealno[]" placeholder="Deal No"  class="form-control"  required/>

        </div>
<div class="form-group"><label class="form-label"><?php echo $pade_title2 ?></label>
<select class="form-control" name="currencybought[]"id="currencybought<?php echo $i?>">
<option>Currency Bought</option>
<?php foreach ($currency as $row) : ?> <option value='<?php echo $row['currency_id'] ?>' <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['currency_id']) ? 'selected' : '' ?>><?php echo $row['Currency'] ?></option> <?php endforeach; ?> </select>

        </div>
      
    </div>
        <div class="col-md-3 col-sm-12">
        
            <div class="form-group"><label class="form-label"><?php echo $pade_title9 ?></label>
        <input id="dealdate<?=$i?>" name="dealdate[]" class="form-control datepicker" type="text" placeholder="MM/DD/YYYY" required/>
        </div>
            <div class="form-group"><label class="form-label"><?php echo $pade_title4 ?></label> 
            <select name="currencysold[]"
            id="currencysold<?=$i?>"
            class="form-control" required>
            <option value="">-- Choose Sold --
            </option>
            <?php foreach ($currency as $row) : ?>
            <option value="<?php echo $row['currency_id'] ?>" <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['currency_id']) ? 'selected' : '' ?>><?php echo $row['Currency'] ?></option>
            <?php endforeach; ?>
            </select>
            </div>
    </div>
    <div class="col-md-3 col-sm-12">

            


                <div class="form-group"><label class="form-label"><?php echo $pade_title7 ?></label>
<select class="form-control select2 w-100" name="refno[]" id="refno<?php echo $i?>">
<option>Select Underlying Exposure Ref No.</option>
<?php foreach ($exposuretype as $row) : ?> <option value='<?php echo $row['transaction_id'] ?>' <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['transaction_id']) ? 'selected' : '' ?>><?php echo $row['exposurereInfo'] ?></option> <?php endforeach; ?>
</select>
</div>

            <div class="form-group"><label class="form-label"><?php echo $pade_title8 ?></label>
        <input id="targetrat" type="number" name="amountFC[]" placeholder="Amount FC" class="form-control"  required/>
        </div>
    
    </div>
    

    <div class="col-md-12">
    <div class="table-responsive">
    <table class="table card-table table-vcenter text-nowrap  align-items-center" id="plansec">
        <thead class="thead-light">
            <tr class="mobcheck">
                <th><input class='check_all' type='checkbox' onclick="select_all()" /> Select All
                </th>
            
            </tr>
        </thead>
        <tbody>


        </tbody>
    </table>
</div>
    </div>
</div>
<button type="submit" class="btn rounded-0 btn-primary bg-gradient">Submit</button>
<button type="button" class="btn btn-info mt-1 mb-1" id="addforwarddetails"><i
        class="fas fa-plus-circle"></i> Add More Forward Cover Details</button>
<button type="button" class="btn hideing btn-danger mt-1 mb-1" id="deletemealplans"><i
        class="fas fa-minus"></i> Delete Forward Cover Details</button>
</form>



</div>

</div>
</div>
<!-- Dynamic fields for plan desc -->
<!-- Dynamic fields for plan desc -->
</div>







<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
<!-- Don't forget to include Jquery also -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<!--Select2 js-->
<script src="assets/plugins/select2/select2.full.js"></script>
<script src="assets/js/select2.js"></script>

<script type="text/javascript" src="<?php echo base_url('assets/calendar/calendar.js'); ?>"></script>

<script>
// adding more fields
var i=2;
numval = 2;

$("#addforwarddetails").on('click',function(){
$("#plansec").css("display", "block");
var counts = $("#count_items").val();
var counter = parseInt(counts);
$('#count_items').val(++counter);
document.getElementById("count_items").value = counter;
count=$('#plansec tr').length;
var data="<tr class='mobcheck'><td><input type='checkbox' class='case'/></td>";
data += "<td><div class='form-group'><label class='form-label'>Forward/ Option</label><input id='fordwardoption"+i+"' type='text' name='fordwardoption[]' placeholder='Forward/ Option' class='form-control' required=''> </div><div class='form-group'><label class='form-label'>Contracted rate</label><input id='contractedrate"+i+"' type='number' name='contractedrate[]' min='0' value='0' step='.0001' placeholder='Contracted Rate' class='form-control' required=''></div><label class='form-label'>Expiry Date</label><div class='form-group'><input id='expirydate"+i+"' name='expirydate[]' class='form-control datepicker'  type='text' placeholder='MM/DD/YYYY' required/></div></td>";
data += "<td><div class='form-group'><label class='form-label'>Deal No</label><input id='dealno"+i+"' type='text' name='dealno[]' placeholder='Deal No' class='form-control' required=''></div><label class='form-label'>Currency Bought</label><div class='form-group'><select name='currencybought[]' id='currencybought"+i+"'  class='form-control' required> <option value=''>-- Currency Bought -- </option> <?php foreach ($currency as $row) : ?> <option value='<?php echo $row['currency_id'] ?>' <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['currency_id']) ? 'selected' : '' ?>><?php echo $row['Currency'] ?></option> <?php endforeach; ?> </select></div><div class='heighsvnrem'></div></td>";
data += "<td><label class='form-label'>Deal Date</label><div class='form-group'><input id='dealdate"+i+"' name='dealdate[]' placeholder='MM/DD/YYYY' class='form-control datepicker' type='text'  required/></div><div class='form-group'><label class='form-label'>Currency Sold</label><select name='currencysold[]' id='currencysold"+i+"' class='form-control' required> <option value=''>-- Currency Sold -- </option> <?php foreach ($currency as $row) : ?> <option value='<?php echo $row['currency_id'] ?>' <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['currency_id']) ? 'selected' : '' ?>><?php echo $row['Currency'] ?></option> <?php endforeach; ?> </select> </div><div class='heighsvnrem'></div></td>";
data += "<td><label class='form-label'>Underlying Exposure Ref.</label><div class='form-group'><select class='form-control select2 refno"+i+" w-100' name='refno[]' id='refno"+i+"'> <option>Select Underlying Exposure Ref No.</option> <?php foreach ($exposuretype as $row) : ?> <option value='<?php echo $row['transaction_id'] ?>' <?php echo (!empty($query[0]->role_id) && $query[0]->role_id == $row['transaction_id']) ? 'selected' : '' ?>><?php echo $row['exposurereInfo'] ?></option> <?php endforeach; ?> </select></div><div class='form-group'><label class='form-label'>Amount (FC)</label><input id='targetrat' type='number' name='amountFC[]' placeholder='Amount FC' class='form-control' required=''></div><div class='heighsvnrem'></div></td></tr>";
$('#plansec').append(data);
$('.refno'+i).select2({  width: '100%'});
i++;
$('.datepicker').datepicker({
showOtherMonths: true,
selectOtherMonths: true
});
});

</script>


































































































I'll give on my birthday, Sir told leave it that's ok














<div class="container-fluid pt-8">
<?= $this->include('bottomtopbar/topbar') ?>
<div class="card-body">
<div class="nav-wrapper p-0">
<?php echo $this->include('message/message') ?>  
</div>
</div>
<div class="card shadow ">
<div class="card-body">

<div class="tab-content" id="myTabContent">

<!-- strat -->
<!-- end -->
<h2 class="mb-5"><?php echo $title ?></h2>

<div class="row">
<div class="col-md-6 col-sm-12">
<div class="form-group"><label class="form-label"><?php echo $pade_title1 ?></label>
<select name="currencyieshelicopterview" 
class="form-control" required>
<option value="" selected>INR SELECTED </option>
<?php foreach ($transaction as $row) : ?>
<option value="<?php echo $row['currency'] ?>" <?php echo ((!empty($row['currency'])&& isset($_GET['currencyieshelicopterview'])) && $row['currency'] == $_GET['currencyieshelicopterview']) ? 'selected' : '' ?>><?php echo $row['Currency'] ?></option>
<?php endforeach; ?>
</select>
</div>
</div>
<div class="col-md-3 col-sm-12">
<label class="form-label"></label>
<div class="form-group mt-3">
	<!-- <label class="form-label card-title">spot ref.</label> -->
</div>
</div>
<div class="col-md-3 col-sm-12">
<label class="form-label"></label>
<div class="form-group mt-3">
	<!-- <label class="form-label card-title">76.7000</label> -->
</div>
</div>


<!-- start -->

<div class="col-md-12" style="display:<?php echo $style ?>">
<div class="card shadow">
<div class="card-header">
	<h2 class="mb-0">MTM - Operating Risk</h2>
</div>
<div class="card-body">
<div id="accordion">
<div class="accordion">
<div class="accordion-header" data-toggle="collapse" data-target="#panel-body-1">
<h4>IMPORTS</h4>
</div>
<div class="accordion-body collapse show border border-top-0 text-sm" id="panel-body-1" data-parent="#accordion">
	<?php 				
	echo "<div class='table-responsive'><table id='example' class='table table-striped table-bordered w-100 text-nowrap'>";
	echo "<thead><tr>";
	echo "<th>-</th>";
	echo "<th>Exposure</th>";
	echo "<th>Target Value</th>";
	echo "<th>Target Rate</th>";
	echo "<th>Hedged Amount</th>";
	echo "<th>Hedged  %</th>";
	echo "<th>Hedged Rate</th>";
	echo "<th>Open Amount FC</th>";
	echo "<th>MTM Rate</th>";
	echo "<th>Open Details - Gain / Loss</th>";
	echo "<th>Potential Gain / Loss on the Portfolio</th>";
	echo "</tr></thead><tbody>";
	foreach($helicoptertabs as $row => $value) {
	$exports_sum = 0;
	$targetvalue_sum = 0;
	$targetrate_sum = 0;
	$hedged_sum = 0;
	$hedged_amount_sum = 0;
	$openamountfc_sum = 0;
	$gainloss_sum = 0;
	$hedgedperctage_sum = 0;
	$mtm_sum = 0;
	$potentialgainloss_sum = 0;
	$potential_portfolio_sum = 0;

	
	// first value
	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio_1 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);
	$exports_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[0] : "0");
	$target_value_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "0");
	$target_rate_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[2] : "0");
	$hedged_1  = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[1] : "0");
	$hedged_amount_1   = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[3] : "0");
	$openamountfc_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "0");
	$gainloss_1 = ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2]) : "0");
	$hedgedperctage_1 = ($value["Q1"] != "" ? (explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100  : "0");

	
	// second value
	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4): 1;
	$potential_portfolio_2 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);
	$exports_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[0] : "0");
	$target_value_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "0");
	$target_rate_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[2] : "0");
	$hedged_2  = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[1] : "0");
	$hedged_amount_2   = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[3] : "0");
	$openamountfc_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "0");
	$gainloss_2 = ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2]) : "0");
	$hedgedperctage_2 = ($value["Q2"] != "" ? (explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100  : "0");

	
	// third value
	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4): 1;
	$potential_portfolio_3 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);
	$exports_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[0] : "0");
	$target_value_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "0");
	$target_rate_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[2] : "0");
	$hedged_3  = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[1] : "0");
	$hedged_amount_3   = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[3] : "0");
	$openamountfc_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "0");
	$gainloss_3 = ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2]) : "0");
	$hedgedperctage_3 = ($value["Q3"] != "" ? (explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100  : "0");

	
	// fourth value
	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio_4 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);
	$exports_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[0] : "0");
	$target_value_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "0");
	$target_rate_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[2] : "0");
	$hedged_4  = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[1] : "0");
	$hedged_amount_4   = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[3] : "0");
	$openamountfc_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "0");
	$gainloss_4 = ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2]) : "0");
	$hedgedperctage_4 = ($value["Q4"] != "" ? (explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100  : "0");


	$exports_sum += $exports_1 + $exports_2 + $exports_3 + $exports_4;
	$targetvalue_sum += $target_value_1 + $target_value_2 + $target_value_3 + $target_value_4;
	$targetrate_sum += $target_rate_1 + $target_rate_2 + $target_rate_3 + $target_rate_4;
	$hedged_sum += $hedged_1 + $hedged_2 + $hedged_3 + $hedged_4;
	$hedged_amount_sum += $hedged_amount_1 + $hedged_amount_2 + $hedged_amount_3 + $hedged_amount_4;
	$openamountfc_sum += $openamountfc_1 + $openamountfc_2 + $openamountfc_3 + $openamountfc_4;
	$gainloss_sum += $gainloss_1 + $gainloss_2 + $gainloss_3 + $gainloss_4;
	$hedgedperctage_sum += $hedgedperctage_1 + $hedgedperctage_2 + $hedgedperctage_3 + $hedgedperctage_4;
	$potential_portfolio_sum += $potential_portfolio_1 + $potential_portfolio_2 + $potential_portfolio_3 + $potential_portfolio_4;
	$mtm_sum += $mtmrate_1 + $mtmrate_2 + $mtmrate_3 + $mtmrate_4;

	
	
	echo "<tr>";	
	echo "<td>Imports</td><td>" . $exports_sum  . "</td>
	<td>" . $targetvalue_sum  . "</td><td>"
	. number_format($targetrate_sum, 4) . "</td><td>"
	. $hedged_amount_sum  . "</td><td>"
	. number_format($hedgedperctage_sum, 4) . "</td><td>"
	. number_format($hedged_sum, 4)  . "</td><td>"
	. $openamountfc_sum  . "</td><td>"
	. number_format($mtm_sum, 4)  . "</td><td>"
	. $gainloss_sum  . "</td><td>"
	. $potential_portfolio_sum  . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);

	echo "<tr>";	
	echo "<td>Q1</td><td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] : "-")  . "</td>
	<td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format((explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);

	echo "<tr>";
	echo "<td>Q2</td><td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] : "-")  . "</td>
	<td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format((explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);

	echo "<tr>";	
	echo "<td>Q3</td><td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] : "-")  . "</td>
	<td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ?  number_format((explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100, 4): "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[1], 4): "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);

	echo "<tr>";	
	echo "<td>Q4</td><td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] : "-")  . "</td>
	<td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[2], 4): "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format((explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";
	}if (count($helicoptertabs) <= 0) :
			echo "<tr>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "</tr>";
		endif;
	echo "</tbody></table></div>";
	?>

</div>
</div>
<div class="accordion">
<div class="accordion-header " data-toggle="collapse" data-target="#panel-body-2">
<h4>EXPORTS</h4>
</div>
<div class="accordion-body collapse border border-top-0 text-sm" id="panel-body-2" data-parent="#accordion">
	<?php 				
	echo "<div class='table-responsive'><table id='example1' class='table table-striped table-bordered w-100 text-nowrap'>";
	echo "<thead><tr>";
	echo "<th>-</th>";
	echo "<th>Exposure</th>";
	echo "<th>Target Value</th>";
	echo "<th>Target Rate</th>";
	echo "<th>Hedged Amount</th>";
	echo "<th>Hedged  %</th>";
	echo "<th>Hedged Rate</th>";
	echo "<th>Open Amount FC</th>";
	echo "<th>MTM Rate</th>";
	echo "<th>Open Details - Gain / Loss</th>";
	echo "<th>Potential Gain / Loss on the Portfolio</th>";
	echo "</tr></thead><tbody>";
	foreach($helicoptertabsexport as $row => $value) {
	$exports_sum = 0;
	$targetvalue_sum = 0;
	$targetrate_sum = 0;
	$hedged_sum = 0;
	$hedged_amount_sum = 0;
	$openamountfc_sum = 0;
	$gainloss_sum = 0;
	$hedgedperctage_sum = 0;
	$mtm_sum = 0;
	$potentialgainloss_sum = 0;
	$potential_portfolio_sum = 0;

	
	// first value
	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio_1 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);
	$exports_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[0] : "0");
	$target_value_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "0");
	$target_rate_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[2] : "0");
	$hedged_1  = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[1] : "0");
	$hedged_amount_1   = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[3] : "0");
	$openamountfc_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "0");
	$gainloss_1 = ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2]) : "0");
	$hedgedperctage_1 = ($value["Q1"] != "" ? (explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100  : "0");

	
	// second value
	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio_2 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);
	$exports_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[0] : "0");
	$target_value_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "0");
	$target_rate_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[2] : "0");
	$hedged_2  = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[1] : "0");
	$hedged_amount_2   = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[3] : "0");
	$openamountfc_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "0");
	$gainloss_2 = ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2]) : "0");
	$hedgedperctage_2 = ($value["Q2"] != "" ? (explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100  : "0");

	
	// third value
	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio_3 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);
	$exports_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[0] : "0");
	$target_value_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "0");
	$target_rate_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[2] : "0");
	$hedged_3  = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[1] : "0");
	$hedged_amount_3   = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[3] : "0");
	$openamountfc_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "0");
	$gainloss_3 = ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2]) : "0");
	$hedgedperctage_3 = ($value["Q3"] != "" ? (explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100  : "0");

	
	// fourth value
	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio_4 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);
	$exports_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[0] : "0");
	$target_value_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "0");
	$target_rate_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[2] : "0");
	$hedged_4  = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[1] : "0");
	$hedged_amount_4   = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[3] : "0");
	$openamountfc_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "0");
	$gainloss_4 = ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2]) : "0");
	$hedgedperctage_4 = ($value["Q4"] != "" ? (explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100  : "0");


	$exports_sum += $exports_1 + $exports_2 + $exports_3 + $exports_4;
	$targetvalue_sum += $target_value_1 + $target_value_2 + $target_value_3 + $target_value_4;
	$targetrate_sum += $target_rate_1 + $target_rate_2 + $target_rate_3 + $target_rate_4;
	$hedged_sum += $hedged_1 + $hedged_2 + $hedged_3 + $hedged_4;
	$hedged_amount_sum += $hedged_amount_1 + $hedged_amount_2 + $hedged_amount_3 + $hedged_amount_4;
	$openamountfc_sum += $openamountfc_1 + $openamountfc_2 + $openamountfc_3 + $openamountfc_4;
	$gainloss_sum += $gainloss_1 + $gainloss_2 + $gainloss_3 + $gainloss_4;
	$hedgedperctage_sum += $hedgedperctage_1 + $hedgedperctage_2 + $hedgedperctage_3 + $hedgedperctage_4;
	$potential_portfolio_sum += $potential_portfolio_1 + $potential_portfolio_2 + $potential_portfolio_3 + $potential_portfolio_4;
	$mtm_sum += $mtmrate_1 + $mtmrate_2 + $mtmrate_3 + $mtmrate_4;

	
	
	echo "<tr>";	
	echo "<td>Exports</td><td>" . $exports_sum  . "</td>
	<td>" . $targetvalue_sum  . "</td><td>"
	. number_format($targetrate_sum, 4) . "</td><td>"
	. $hedged_amount_sum  . "</td><td>"
	. number_format($hedgedperctage_sum, 4)  . "</td><td>"
	. number_format($hedged_sum, 4)  . "</td><td>"
	. $openamountfc_sum  . "</td><td>"
	. number_format($mtm_sum, 4)  . "</td><td>"
	. $gainloss_sum  . "</td><td>"
	. $potential_portfolio_sum  . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);

	echo "<tr>";	
	echo "<td>Q1</td><td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] : "-")  . "</td>
	<td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format((explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4)  : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);

	echo "<tr>";
	echo "<td>Q2</td><td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] : "-")  . "</td>
	<td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format((explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4)  : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);

	echo "<tr>";	
	echo "<td>Q3</td><td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] : "-")  . "</td>
	<td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format((explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4)  : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);

	echo "<tr>";	
	echo "<td>Q4</td><td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] : "-")  . "</td>
	<td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format((explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";
	}if (count($helicoptertabsexport) <= 0) :
			echo "<tr>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "</tr>";
		endif;
	echo "</tbody></table></div>";
	?>

</div>

</div>

<!-- Buyer Credit -->


<div class="accordion">
<div class="accordion-header " data-toggle="collapse" data-target="#panel-body-3">
<h4>BUYERS CREDIT</h4>
</div>
<div class="accordion-body collapse border border-top-0 text-sm" id="panel-body-3" data-parent="#accordion">
	<?php 				
	echo "<div class='table-responsive'><table id='example3' class='table table-striped table-bordered w-100 text-nowrap'>";
	echo "<thead><tr>";
	echo "<th></th>";
	echo "<th>Exposure</th>";
	echo "<th>Target Value</th>";
	echo "<th>Target Rate</th>";
	echo "<th>Hedged Amount</th>";
	echo "<th>Hedged  %</th>";
	echo "<th>Hedged Rate</th>";
	echo "<th>Open Amount FC</th>";
	echo "<th>MTM Rate</th>";
	echo "<th>Open Details - Gain / Loss</th>";
	echo "<th>Potential Gain / Loss on the Portfolio</th>";
	echo "</tr></thead><tbody>";
	foreach($helicoptertabsbuyersCredit as $row => $value) {
	$exports_sum = 0;
	$targetvalue_sum = 0;
	$targetrate_sum = 0;
	$hedged_sum = 0;
	$hedged_amount_sum = 0;
	$openamountfc_sum = 0;
	$gainloss_sum = 0;
	$hedgedperctage_sum = 0;
	$mtm_sum = 0;
	$potentialgainloss_sum = 0;
	$potential_portfolio_sum = 0;

	
	// first value
	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio_1 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);
	$exports_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[0] : "0");
	$target_value_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "0");
	$target_rate_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[2] : "0");
	$hedged_1  = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[1] : "0");
	$hedged_amount_1   = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[3] : "0");
	$openamountfc_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "0");
	$gainloss_1 = ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2]) : "0");
	$hedgedperctage_1 = ($value["Q1"] != "" ? (explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100  : "0");

	
	// second value
	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio_2 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);
	$exports_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[0] : "0");
	$target_value_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "0");
	$target_rate_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[2] : "0");
	$hedged_2  = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[1] : "0");
	$hedged_amount_2   = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[3] : "0");
	$openamountfc_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "0");
	$gainloss_2 = ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2]) : "0");
	$hedgedperctage_2 = ($value["Q2"] != "" ? (explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100  : "0");

	
	// third value
	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4],4) : 1;
	$potential_portfolio_3 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);
	$exports_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[0] : "0");
	$target_value_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "0");
	$target_rate_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[2] : "0");
	$hedged_3  = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[1] : "0");
	$hedged_amount_3   = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[3] : "0");
	$openamountfc_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "0");
	$gainloss_3 = ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2]) : "0");
	$hedgedperctage_3 = ($value["Q3"] != "" ? (explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100  : "0");

	
	// fourth value
	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio_4 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);
	$exports_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[0] : "0");
	$target_value_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "0");
	$target_rate_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[2] : "0");
	$hedged_4  = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[1] : "0");
	$hedged_amount_4   = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[3] : "0");
	$openamountfc_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "0");
	$gainloss_4 = ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2]) : "0");
	$hedgedperctage_4 = ($value["Q4"] != "" ? (explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100  : "0");


	$exports_sum += $exports_1 + $exports_2 + $exports_3 + $exports_4;
	$targetvalue_sum += $target_value_1 + $target_value_2 + $target_value_3 + $target_value_4;
	$targetrate_sum += $target_rate_1 + $target_rate_2 + $target_rate_3 + $target_rate_4;
	$hedged_sum += $hedged_1 + $hedged_2 + $hedged_3 + $hedged_4;
	$hedged_amount_sum += $hedged_amount_1 + $hedged_amount_2 + $hedged_amount_3 + $hedged_amount_4;
	$openamountfc_sum += $openamountfc_1 + $openamountfc_2 + $openamountfc_3 + $openamountfc_4;
	$gainloss_sum += $gainloss_1 + $gainloss_2 + $gainloss_3 + $gainloss_4;
	$hedgedperctage_sum += $hedgedperctage_1 + $hedgedperctage_2 + $hedgedperctage_3 + $hedgedperctage_4;
	$potential_portfolio_sum += $potential_portfolio_1 + $potential_portfolio_2 + $potential_portfolio_3 + $potential_portfolio_4;
	$mtm_sum += $mtmrate_1 + $mtmrate_2 + $mtmrate_3 + $mtmrate_4;

	
	
	echo "<tr>";	
	echo "<td>Buyers Credit</td><td>" . $exports_sum  . "</td>
	<td>" . $targetvalue_sum  . "</td><td>"
	. number_format($targetrate_sum, 4)  . "</td><td>"
	. $hedged_amount_sum  . "</td><td>"
	. number_format($hedgedperctage_sum, 4)  . "</td><td>"
	. number_format($hedged_sum, 4)  . "</td><td>"
	. $openamountfc_sum  . "</td><td>"
	. $mtm_sum  . "</td><td>"
	. $gainloss_sum  . "</td><td>"
	. $potential_portfolio_sum  . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);

	echo "<tr>";	
	echo "<td>Q1</td><td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] : "-")  . "</td>
	<td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format((explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[1], 4): "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);

	echo "<tr>";
	echo "<td>Q2</td><td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] : "-")  . "</td>
	<td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format((explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);

	echo "<tr>";	
	echo "<td>Q3</td><td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] : "-")  . "</td>
	<td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format((explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);

	echo "<tr>";	
	echo "<td>Q4</td><td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] : "-")  . "</td>
	<td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format((explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[1], 4): "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";
	}if (count($helicoptertabsbuyersCredit) <= 0) :
				echo "<tr>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "</tr>";
		endif;
	echo "</tbody></table></div>";
	?>

</div>

</div>

<!-- Capital Payments -->


<div class="accordion">
<div class="accordion-header " data-toggle="collapse" data-target="#panel-body-4">
<h4>CAPITAL PAYMENTS</h4>
</div>
<div class="accordion-body collapse border border-top-0 text-sm" id="panel-body-4" data-parent="#accordion">
	<?php 				
	echo "<div class='table-responsive'><table id='example4' class='table table-striped table-bordered w-100 text-nowrap'>";
	echo "<thead><tr>";
	echo "<th>-</th>";
	echo "<th>Exposure</th>";
	echo "<th>Target Value</th>";
	echo "<th>Target Rate</th>";
	echo "<th>Hedged Amount</th>";
	echo "<th>Hedged  %</th>";
	echo "<th>Hedged Rate</th>";
	echo "<th>Open Amount FC</th>";
	echo "<th>MTM Rate</th>";
	echo "<th>Open Details - Gain / Loss</th>";
	echo "<th>Potential Gain / Loss on the Portfolio</th>";
	echo "</tr></thead><tbody>";
	foreach($helicoptertabscapitalpaymnts as $row => $value) {
	$exports_sum = 0;
	$targetvalue_sum = 0;
	$targetrate_sum = 0;
	$hedged_sum = 0;
	$hedged_amount_sum = 0;
	$openamountfc_sum = 0;
	$gainloss_sum = 0;
	$hedgedperctage_sum = 0;
	$mtm_sum = 0;
	$potentialgainloss_sum = 0;
	$potential_portfolio_sum = 0;

	
	// first value
	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio_1 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);
	$exports_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[0] : "0");
	$target_value_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "0");
	$target_rate_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[2] : "0");
	$hedged_1  = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[1] : "0");
	$hedged_amount_1   = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[3] : "0");
	$openamountfc_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "0");
	$gainloss_1 = ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2]) : "0");
	$hedgedperctage_1 = ($value["Q1"] != "" ? (explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100  : "0");

	
	// second value
	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4): 1;
	$potential_portfolio_2 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);
	$exports_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[0] : "0");
	$target_value_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "0");
	$target_rate_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[2] : "0");
	$hedged_2  = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[1] : "0");
	$hedged_amount_2   = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[3] : "0");
	$openamountfc_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "0");
	$gainloss_2 = ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2]) : "0");
	$hedgedperctage_2 = ($value["Q2"] != "" ? (explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100  : "0");

	
	// third value
	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio_3 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);
	$exports_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[0] : "0");
	$target_value_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "0");
	$target_rate_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[2] : "0");
	$hedged_3  = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[1] : "0");
	$hedged_amount_3   = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[3] : "0");
	$openamountfc_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "0");
	$gainloss_3 = ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2]) : "0");
	$hedgedperctage_3 = ($value["Q3"] != "" ? (explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100  : "0");

	
	// fourth value
	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio_4 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);
	$exports_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[0] : "0");
	$target_value_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "0");
	$target_rate_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[2] : "0");
	$hedged_4  = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[1] : "0");
	$hedged_amount_4   = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[3] : "0");
	$openamountfc_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "0");
	$gainloss_4 = ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2]) : "0");
	$hedgedperctage_4 = ($value["Q4"] != "" ? (explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100  : "0");


	$exports_sum += $exports_1 + $exports_2 + $exports_3 + $exports_4;
	$targetvalue_sum += $target_value_1 + $target_value_2 + $target_value_3 + $target_value_4;
	$targetrate_sum += $target_rate_1 + $target_rate_2 + $target_rate_3 + $target_rate_4;
	$hedged_sum += $hedged_1 + $hedged_2 + $hedged_3 + $hedged_4;
	$hedged_amount_sum += $hedged_amount_1 + $hedged_amount_2 + $hedged_amount_3 + $hedged_amount_4;
	$openamountfc_sum += $openamountfc_1 + $openamountfc_2 + $openamountfc_3 + $openamountfc_4;
	$gainloss_sum += $gainloss_1 + $gainloss_2 + $gainloss_3 + $gainloss_4;
	$hedgedperctage_sum += $hedgedperctage_1 + $hedgedperctage_2 + $hedgedperctage_3 + $hedgedperctage_4;
	$potential_portfolio_sum += $potential_portfolio_1 + $potential_portfolio_2 + $potential_portfolio_3 + $potential_portfolio_4;
	$mtm_sum += $mtmrate_1 + $mtmrate_2 + $mtmrate_3 + $mtmrate_4;

	
	
	echo "<tr>";	
	echo "<td>Capital Payments</td><td>" . $exports_sum  . "</td>
	<td>" . $targetvalue_sum  . "</td><td>"
	. number_format($targetrate_sum, 4) . "</td><td>"
	. $hedged_amount_sum  . "</td><td>"
	. number_format($hedgedperctage_sum, 4)  . "</td><td>"
	. number_format($hedged_sum, 4) . "</td><td>"
	. $openamountfc_sum  . "</td><td>"
	. $mtm_sum  . "</td><td>"
	. $gainloss_sum  . "</td><td>"
	. $potential_portfolio_sum  . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);

	echo "<tr>";	
	echo "<td>Q1</td><td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] : "-")  . "</td>
	<td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format((explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4): "-")  . "</td><td>"
	. ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);

	echo "<tr>";
	echo "<td>Q2</td><td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] : "-")  . "</td>
	<td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format((explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);

	echo "<tr>";	
	echo "<td>Q3</td><td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] : "-")  . "</td>
	<td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format((explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[1], 4): "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);

	echo "<tr>";	
	echo "<td>Q4</td><td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] : "-")  . "</td>
	<td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format((explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100, 4): "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";
	}if (count($helicoptertabscapitalpaymnts) <= 0) :
			echo "<tr>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "</tr>";
		endif;
	echo "</tbody></table></div>";
	?>

</div>

</div>


<!-- Misc. -->


<div class="accordion">
<div class="accordion-header " data-toggle="collapse" data-target="#panel-body-5">
<h4>MISC</h4>
</div>
<div class="accordion-body collapse border border-top-0 text-sm" id="panel-body-5" data-parent="#accordion">
	<?php 				
	echo "<div class='table-responsive'><table id='example5' class='table table-striped table-bordered w-100 text-nowrap'>";
	echo "<thead><tr>";
	echo "<th>-</th>";
	echo "<th>Exposure</th>";
	echo "<th>Target Value</th>";
	echo "<th>Target Rate</th>";
	echo "<th>Hedged Amount</th>";
	echo "<th>Hedged  %</th>";
	echo "<th>Hedged Rate</th>";
	echo "<th>Open Amount FC</th>";
	echo "<th>MTM Rate</th>";
	echo "<th>Open Details - Gain / Loss</th>";
	echo "<th>Potential Gain / Loss on the Portfolio</th>";
	echo "</tr></thead><tbody>";
	foreach($helicoptertabsbuyersmisc as $row => $value) {
	$exports_sum = 0;
	$targetvalue_sum = 0;
	$targetrate_sum = 0;
	$hedged_sum = 0;
	$hedged_amount_sum = 0;
	$openamountfc_sum = 0;
	$gainloss_sum = 0;
	$hedgedperctage_sum = 0;
	$mtm_sum = 0;
	$potentialgainloss_sum = 0;
	$potential_portfolio_sum = 0;

	
	// first value
	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio_1 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);
	$exports_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[0] : "0");
	$target_value_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "0");
	$target_rate_1 = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[2] : "0");
	$hedged_1  = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[1] : "0");
	$hedged_amount_1   = ($value["Q1"] != "" ?  explode(",", $value["Q1"])[3] : "0");
	$openamountfc_1 = ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "0");
	$gainloss_1 = ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2]) : "0");
	$hedgedperctage_1 = ($value["Q1"] != "" ? (explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100  : "0");

	
	// second value
	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4): 1;
	$potential_portfolio_2 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);
	$exports_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[0] : "0");
	$target_value_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "0");
	$target_rate_2 = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[2] : "0");
	$hedged_2  = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[1] : "0");
	$hedged_amount_2   = ($value["Q2"] != "" ?  explode(",", $value["Q2"])[3] : "0");
	$openamountfc_2 = ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "0");
	$gainloss_2 = ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2]) : "0");
	$hedgedperctage_2 = ($value["Q2"] != "" ? (explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100  : "0");

	
	// third value
	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio_3 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);
	$exports_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[0] : "0");
	$target_value_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "0");
	$target_rate_3 = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[2] : "0");
	$hedged_3  = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[1] : "0");
	$hedged_amount_3   = ($value["Q3"] != "" ?  explode(",", $value["Q3"])[3] : "0");
	$openamountfc_3 = ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "0");
	$gainloss_3 = ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2]) : "0");
	$hedgedperctage_3 = ($value["Q3"] != "" ? (explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100  : "0");

	
	// fourth value
	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio_4 = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);
	$exports_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[0] : "0");
	$target_value_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "0");
	$target_rate_4 = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[2] : "0");
	$hedged_4  = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[1] : "0");
	$hedged_amount_4   = ($value["Q4"] != "" ?  explode(",", $value["Q4"])[3] : "0");
	$openamountfc_4 = ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "0");
	$gainloss_4 = ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2]) : "0");
	$hedgedperctage_4 = ($value["Q4"] != "" ? (explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100  : "0");


	$exports_sum += $exports_1 + $exports_2 + $exports_3 + $exports_4;
	$targetvalue_sum += $target_value_1 + $target_value_2 + $target_value_3 + $target_value_4;
	$targetrate_sum += $target_rate_1 + $target_rate_2 + $target_rate_3 + $target_rate_4;
	$hedged_sum += $hedged_1 + $hedged_2 + $hedged_3 + $hedged_4;
	$hedged_amount_sum += $hedged_amount_1 + $hedged_amount_2 + $hedged_amount_3 + $hedged_amount_4;
	$openamountfc_sum += $openamountfc_1 + $openamountfc_2 + $openamountfc_3 + $openamountfc_4;
	$gainloss_sum += $gainloss_1 + $gainloss_2 + $gainloss_3 + $gainloss_4;
	$hedgedperctage_sum += $hedgedperctage_1 + $hedgedperctage_2 + $hedgedperctage_3 + $hedgedperctage_4;
	$potential_portfolio_sum += $potential_portfolio_1 + $potential_portfolio_2 + $potential_portfolio_3 + $potential_portfolio_4;
	$mtm_sum += $mtmrate_1 + $mtmrate_2 + $mtmrate_3 + $mtmrate_4;

	
	
	echo "<tr>";	
	echo "<td>Misc</td><td>" . $exports_sum  . "</td>
	<td>" . $targetvalue_sum  . "</td><td>"
	. number_format($targetrate_sum, 4)  . "</td><td>"
	. $hedged_amount_sum  . "</td><td>"
	. number_format($hedgedperctage_sum, 4)  . "</td><td>"
	. number_format($hedged_sum, 4) . "</td><td>"
	. $openamountfc_sum  . "</td><td>"
	. $mtm_sum  . "</td><td>"
	. $gainloss_sum  . "</td><td>"
	. $potential_portfolio_sum  . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[3] : 0;
	$hedgedpositionrate = $value["Q1"] != "" ? explode(",", $value["Q1"])[1] : 0;
	$openpositionamount = $value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : 0;
	$mtmrate_1 = $value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_1);

	echo "<tr>";	
	echo "<td>Q1</td><td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] : "-")  . "</td>
	<td>" . ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] * explode(",", $value["Q1"])[2] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format((explode(",", $value["Q1"])[3] / explode(",", $value["Q1"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3] : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? number_format(explode(",", $value["Q1"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q1"] != "" ? ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*82.60) - ((explode(",", $value["Q1"])[0] - explode(",", $value["Q1"])[3])*explode(",", $value["Q1"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[3] : 0;
	$hedgedpositionrate = $value["Q2"] != "" ? explode(",", $value["Q2"])[1] : 0;
	$openpositionamount = $value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : 0;
	$mtmrate_2 = $value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_2);

	echo "<tr>";
	echo "<td>Q2</td><td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] : "-")  . "</td>
	<td>" . ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] * explode(",", $value["Q2"])[2] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format((explode(",", $value["Q2"])[3] / explode(",", $value["Q2"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3] : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? number_format(explode(",", $value["Q2"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q2"] != "" ? ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*82.60) - ((explode(",", $value["Q2"])[0] - explode(",", $value["Q2"])[3])*explode(",", $value["Q2"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[3] : 0;
	$hedgedpositionrate = $value["Q3"] != "" ? explode(",", $value["Q3"])[1] : 0;
	$openpositionamount = $value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : 0;
	$mtmrate_3 = $value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_3);

	echo "<tr>";	
	echo "<td>Q3</td><td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] : "-")  . "</td>
	<td>" . ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] * explode(",", $value["Q3"])[2] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format((explode(",", $value["Q3"])[3] / explode(",", $value["Q3"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[1], 4): "-")  . "</td><td>"
	. ($value["Q3"] != "" ? explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3] : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? number_format(explode(",", $value["Q3"])[4], 4) : "-")  . "</td><td>"
	. ($value["Q3"] != "" ? ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*82.60) - ((explode(",", $value["Q3"])[0] - explode(",", $value["Q3"])[3])*explode(",", $value["Q3"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";

	$hedgedpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[3] : 0;
	$hedgedpositionrate = $value["Q4"] != "" ? explode(",", $value["Q4"])[1] : 0;
	$openpositionamount = $value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : 0;
	$mtmrate_4 = $value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4], 4) : 1;
	$potential_portfolio = ($hedgedpositionamount * $hedgedpositionrate) + ($openpositionamount * $mtmrate_4);

	echo "<tr>";	
	echo "<td>Q4</td><td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] : "-")  . "</td>
	<td>" . ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] * explode(",", $value["Q4"])[2] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[2], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format((explode(",", $value["Q4"])[3] / explode(",", $value["Q4"])[0])*100, 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[1], 4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3] : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? number_format(explode(",", $value["Q4"])[4],4) : "-")  . "</td><td>"
	. ($value["Q4"] != "" ? ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*82.60) - ((explode(",", $value["Q4"])[0] - explode(",", $value["Q4"])[3])*explode(",", $value["Q4"])[2])  : "-")  . "</td><td>"
	.  $potential_portfolio . "</td>";
	echo "</tr>";
	}if (count($helicoptertabsbuyersmisc) <= 0) :
				echo "<tr>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
            echo "<td>No result found</td>";
			echo "</tr>";
		endif;
	echo "</tbody></table></div>";
	?>

</div>

</div>


</div>

</div>
</div>
</div>
<!-- end  --> 
</div>
</div>
</div>
</div>
<!-- Dynamic fields for plan desc -->
<!-- Dynamic fields for plan desc -->
</div>







<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
<!-- Don't forget to include Jquery also -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>


<script>
$(document).ready(function() {
var selectEl = $('select[name="currencyieshelicopterview"]');
var currentVal = selectEl.val(); // initialize current value

selectEl.on('change', function() {
var selectedVal = $(this).val();
if(selectedVal && selectedVal !== currentVal) { // check if value has changed
currentVal = selectedVal; // update current value
window.location.href = 'helicopterview?currencyieshelicopterview=' + selectedVal; // update URL
}
});
});

</script>
